WITH latest_4_months AS (
    SELECT 
        year,
        month
    FROM 
        user_applications
    GROUP BY 
        year, month
    ORDER BY 
        year DESC, month DESC
    LIMIT 4
)
SELECT 
    ua.*
FROM 
    user_applications ua
JOIN 
    latest_4_months lm
ON 
    ua.year = lm.year AND ua.month = lm.month
ORDER BY 
    ua.year DESC, ua.month DESC, ua.app_name, ua.user;